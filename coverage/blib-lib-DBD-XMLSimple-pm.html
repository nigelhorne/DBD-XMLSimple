<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.51
Devel::Cover is copyright 2001-2025, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
https://pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: blib/lib/DBD/XMLSimple.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">blib/lib/DBD/XMLSimple.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c2">90.5%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td class="s">package DBD::XMLSimple;</td></tr>
<tr><td class="h">2</td><td colspan="6"></td></tr><tr><td class="h">3</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L3">5</a></div></td><td><div>553628</div><div>3</div><div>146</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">4</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L4">5</a></div></td><td><div>10</div><div>4</div><div>90</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">5</td><td colspan="6"></td></tr><tr><td class="h">6 - 14</td><td colspan="5"></td><td class="s"><pre>=head1 NAME

DBD::XMLSimple - Access XML data via the DBI interface

=head1 VERSION

Version 0.08

=cut</pre></td></tr>
<tr><td class="h">15</td><td colspan="6"></td></tr><tr><td class="h">16 - 68</td><td colspan="5"></td><td class="s"><pre>=head1 SYNOPSIS

Reads XML and makes it available via DBI.

Sadly, DBD::AnyData doesn&#39;t work with the latest DBI,
and DBD::AnyData2 isn&#39;t out yet, so I am writing this pending the publication of DBD::AnyData2.

DBD-XMLSimple doesn&#39;t yet expect to support complex XML data, so that&#39;s why
it&#39;s not called DBD-XML.

The XML file needs to have a &lt;table&gt; containing the entry/entries.

&nbsp;&nbsp;&nbsp;&nbsp;use FindBin qw($Bin);
&nbsp;&nbsp;&nbsp;&nbsp;use DBI;

&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = DBI-&gt;connect(&#39;dbi:XMLSimple(RaiseError =&gt; 1):&#39;);

&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;func(&#39;person&#39;, &#39;XML&#39;, &quot;$Bin/../data/person.xml&quot;, &#39;xmlsimple_import&#39;);

&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $dbh-&gt;prepare(&#39;SELECT * FROM person&#39;);

Input data will be something like this:

&nbsp;&nbsp;&nbsp;&nbsp;&lt;?xml version=&quot;1.0&quot; encoding=&quot;US-ASCII&quot;?&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;row id=&quot;1&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;Nigel Horne&lt;/name&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;email&gt;njh@nigelhorne.com&lt;/email&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/row&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;row id=&quot;2&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;A N Other&lt;/name&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;email&gt;nobody@example.com&lt;/email&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/row&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;

If a leaf appears twice,
it will be concatenated.

&nbsp;&nbsp;&nbsp;&nbsp;&lt;?xml version=&quot;1.0&quot; encoding=&quot;US-ASCII&quot;?&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;table&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;row id=&quot;1&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;Nigel Horne&lt;/name&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;email&gt;njh@nigelhorne.com&lt;/email&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;email&gt;nhorne@pause.org&lt;/email&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/row&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/table&gt;

&nbsp;&nbsp;&nbsp;&nbsp;$sth = $dbh-&gt;prepare(&#39;Select email FROM person&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute();
&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;dump_results();

&nbsp;&nbsp;&nbsp;&nbsp;Gives the output &quot;njh@nigelhorne.com,nhorne@pause.org&quot;
=cut</pre></td></tr>
<tr><td class="h">69</td><td colspan="6"></td></tr><tr><td class="h">70 - 76</td><td colspan="5"></td><td class="s"><pre>=head1 SUBROUTINES/METHODS

=head2 driver

No routines in this module should be called directly by the application.

=cut</pre></td></tr>
<tr><td class="h">77</td><td colspan="6"></td></tr><tr><td class="h">78</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L78">5</a></div></td><td><div>11</div><div>4</div><div>1539</div></td><td class="s">use base qw(DBI::DBD::SqlEngine);</td></tr>
<tr><td class="h">79</td><td colspan="6"></td></tr><tr><td class="h">80</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L80">5</a></div></td><td><div>255175</div><div>5</div><div>423</div></td><td class="s">use vars qw($VERSION $drh $methods_already_installed);</td></tr>
<tr><td class="h">81</td><td colspan="6"></td></tr><tr><td class="h">82</td><td></td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;0.08&#39;;</td></tr>
<tr><td class="h">83</td><td></td><td></td><td></td><td></td><td></td><td class="s">our $drh = undef;</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td></td><td class="s">our $methods_already_installed = 0;</td></tr>
<tr><td class="h">85</td><td colspan="6"></td></tr><tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub driver</td></tr>
<tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">88</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L88">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L88">4</a></div></td><td><div>1298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $drh if $drh;</td></tr>
<tr><td class="h">89</td><td colspan="6"></td></tr><tr><td class="h">90</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# my($class, $attr) = @_;</td></tr>
<tr><td class="h">91</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $class = $_[0];</td></tr>
<tr><td class="h">92</td><td colspan="6"></td></tr><tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $class .= &#39;::dr&#39;;</td></tr>
<tr><td class="h">94</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $drh = DBI::_new_drh($class, {</td></tr>
<tr><td class="h">95</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $drh = DBI::_new_drh(&quot;$class::dr&quot;, {</td></tr>
<tr><td class="h">96</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$drh = $class-&gt;SUPER::driver({</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Name&#39; =&gt; &#39;XMLSimple&#39;,</td></tr>
<tr><td class="h">98</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Version&#39; =&gt; $VERSION,</td></tr>
<tr><td class="h">99</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;Attribution&#39; =&gt; &#39;DBD::XMLSimple by Nigel Horne&#39;,</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</td></tr>
<tr><td class="h">101</td><td colspan="6"></td></tr><tr><td class="h">102</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L102">50</a></div></td><td></td><td></td><td><div>1329</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($drh) {</td></tr>
<tr><td class="h">103</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class .= &#39;::db&#39;;</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# DBI-&gt;setup_driver($class);</td></tr>
<tr><td class="h">105</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L105">50</a></div></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class-&gt;install_method(&#39;xmlsimple_import&#39;) unless $drh-&gt;{methods_installed}++;</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">107</td><td colspan="6"></td></tr><tr><td class="h">108</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $drh;</td></tr>
<tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">110</td><td colspan="6"></td></tr><tr><td class="h">111</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub CLONE</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">113</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L113">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $drh;</td></tr>
<tr><td class="h">114</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">115</td><td colspan="6"></td></tr><tr><td class="h">116</td><td></td><td></td><td></td><td></td><td></td><td class="s">package DBD::XMLSimple::dr;</td></tr>
<tr><td class="h">117</td><td colspan="6"></td></tr><tr><td class="h">118</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L118">5</a></div></td><td><div>12</div><div>3</div><div>201</div></td><td class="s">use vars qw($imp_data_size);</td></tr>
<tr><td class="h">119</td><td colspan="6"></td></tr><tr><td class="h">120</td><td></td><td></td><td></td><td></td><td></td><td class="s">$imp_data_size = 0;</td></tr>
<tr><td class="h">121</td><td colspan="6"></td></tr><tr><td class="h">122</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub disconnect_all</td></tr>
<tr><td class="h">123</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">124</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L124">4</a></div></td><td><div>2425</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift-&gt;{tables} = {};</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">126</td><td colspan="6"></td></tr><tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub DESTROY</td></tr>
<tr><td class="h">128</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">129</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L129">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shift-&gt;{tables} = {};</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">131</td><td colspan="6"></td></tr><tr><td class="h">132</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Database handle</td></tr>
<tr><td class="h">133</td><td></td><td></td><td></td><td></td><td></td><td class="s">package DBD::XMLSimple::db;</td></tr>
<tr><td class="h">134</td><td colspan="6"></td></tr><tr><td class="h">135</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L135">5</a></div></td><td><div>9</div><div>4</div><div>705</div></td><td class="s">use base qw(DBI::DBD::SqlEngine::db);</td></tr>
<tr><td class="h">136</td><td colspan="6"></td></tr><tr><td class="h">137</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L137">5</a></div></td><td><div>12</div><div>4</div><div>305</div></td><td class="s">use vars qw($imp_data_size);</td></tr>
<tr><td class="h">138</td><td colspan="6"></td></tr><tr><td class="h">139</td><td></td><td></td><td></td><td></td><td></td><td class="s">$DBD::XMLSimple::db::imp_data_size = 0;</td></tr>
<tr><td class="h">140</td><td colspan="6"></td></tr><tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub xmlsimple_import</td></tr>
<tr><td class="h">142</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">143</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# my($dbh, $table_name, $format, $filename, $flags) = @_;</td></tr>
<tr><td class="h">144</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L144">7</a></div></td><td><div>1702</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($dbh, $table_name, $format, $filename) = @_;</td></tr>
<tr><td class="h">145</td><td colspan="6"></td></tr><tr><td class="h">146</td><td><div class="c3">7</div></td><td><div class="c0" title="-/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L146">50</a></div></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die if($format ne &#39;XML&#39;);</td></tr>
<tr><td class="h">147</td><td colspan="6"></td></tr><tr><td class="h">148</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# $dbh-&gt;{tables} ||= {};</td></tr>
<tr><td class="h">149</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;{tables}{$table_name} = { filename =&gt; $filename, rows =&gt; [], col_names =&gt; [] };</td></tr>
<tr><td class="h">150</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">151</td><td colspan="6"></td></tr><tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td class="s">package DBD::XMLSimple::st;</td></tr>
<tr><td class="h">153</td><td colspan="6"></td></tr><tr><td class="h">154</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L154">5</a></div></td><td><div>13</div><div>8</div><div>43</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">155</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L155">5</a></div></td><td><div>7</div><div>3</div><div>123</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">156</td><td colspan="6"></td></tr><tr><td class="h">157</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L157">5</a></div></td><td><div>14</div><div>4</div><div>675</div></td><td class="s">use base qw(DBI::DBD::SqlEngine::st);</td></tr>
<tr><td class="h">158</td><td colspan="6"></td></tr><tr><td class="h">159</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L159">5</a></div></td><td><div>10</div><div>5</div><div>113</div></td><td class="s">use vars qw($imp_data_size);</td></tr>
<tr><td class="h">160</td><td colspan="6"></td></tr><tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td class="s">$DBD::XMLSimple::st::imp_data_size = 0;</td></tr>
<tr><td class="h">162</td><td colspan="6"></td></tr><tr><td class="h">163</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Statement handle</td></tr>
<tr><td class="h">164</td><td></td><td></td><td></td><td></td><td></td><td class="s">package DBD::XMLSimple::Statement;</td></tr>
<tr><td class="h">165</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L165">5</a></div></td><td><div>10</div><div>5</div><div>576</div></td><td class="s">use base qw(DBI::DBD::SqlEngine::Statement);</td></tr>
<tr><td class="h">166</td><td colspan="6"></td></tr><tr><td class="h">167</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L167">5</a></div></td><td><div>10</div><div>3</div><div>43</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">168</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L168">5</a></div></td><td><div>13</div><div>5</div><div>98</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">169</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L169">5</a></div></td><td><div>5169</div><div>195771</div><div>103</div></td><td class="s">use XML::Twig;</td></tr>
<tr><td class="h">170</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L170">5</a></div></td><td><div>21</div><div>1</div><div>1136</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">171</td><td colspan="6"></td></tr><tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub open_table($$$$$)</td></tr>
<tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">174</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L174">14</a></div></td><td><div>21644</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($self, $data, $tname) = @_;</td></tr>
<tr><td class="h">175</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $data-&gt;{Database};</td></tr>
<tr><td class="h">176</td><td colspan="6"></td></tr><tr><td class="h">177</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Determine the table name</td></tr>
<tr><td class="h">178</td><td><div class="c3">14</div><div class="c0">0</div></td><td></td><td><div class="c0"><a href="blib-lib-DBD-XMLSimple-pm--condition.html#L178">33</a></div></td><td></td><td><div>19</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tname ||= (keys %{$dbh-&gt;{tables}})[0];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# fallback to first registered table</td></tr>
<tr><td class="h">179</td><td><div class="c3">14</div></td><td><div class="c0" title="-/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L179">50</a></div></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table_info = $dbh-&gt;{tables}{$tname}</td></tr>
<tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or croak &quot;No XML file registered for table &#39;$tname&#39;&quot;;</td></tr>
<tr><td class="h">181</td><td colspan="6"></td></tr><tr><td class="h">182</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $source = $table_info-&gt;{filename};</td></tr>
<tr><td class="h">183</td><td colspan="6"></td></tr><tr><td class="h">184</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $twig = XML::Twig-&gt;new();</td></tr>
<tr><td class="h">185</td><td colspan="6"></td></tr><tr><td class="h">186</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L186">100</a></div></td><td></td><td></td><td><div>13446</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(ref($source) eq &#39;ARRAY&#39;) {</td></tr>
<tr><td class="h">187</td><td><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td></td><td><div>8</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$twig-&gt;parse(join(&#39;&#39;, @{$source}));</td></tr>
<tr><td class="h">188</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">189</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$twig-&gt;parsefile($source);</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">191</td><td colspan="6"></td></tr><tr><td class="h">192</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>24215</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $root = $twig-&gt;root;</td></tr>
<tr><td class="h">193</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @records = $root-&gt;children();</td></tr>
<tr><td class="h">194</td><td colspan="6"></td></tr><tr><td class="h">195</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L195">100</a></div></td><td></td><td></td><td><div>198</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &#39;No rows found under &lt;table&gt;&#39; if !@records;</td></tr>
<tr><td class="h">196</td><td colspan="6"></td></tr><tr><td class="h">197</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @rows;</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %colnames_seen;</td></tr>
<tr><td class="h">199</td><td colspan="6"></td></tr><tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# First pass &acirc;&#128;&#148; discover columns across all rows</td></tr>
<tr><td class="h">201</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $record (@records) {</td></tr>
<tr><td class="h">202</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $leaf ($record-&gt;children) {</td></tr>
<tr><td class="h">203</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td><div>310</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$colnames_seen{$leaf-&gt;name()}++;</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Also include &#39;id&#39;</td></tr>
<tr><td class="h">206</td><td><div class="c3">30</div></td><td><div class="c0" title="T/-"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L206">50</a></div></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (defined(my $id = $record-&gt;att(&#39;id&#39;))) {</td></tr>
<tr><td class="h">207</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$colnames_seen{id}++;</td></tr>
<tr><td class="h">208</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">209</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">210</td><td colspan="6"></td></tr><tr><td class="h">211</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @col_names = sort keys %colnames_seen;</td></tr>
<tr><td class="h">212</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L212">100</a></div></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!@col_names) {</td></tr>
<tr><td class="h">213</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &quot;Empty table, creating dummy column &#39;_dummy&#39;&quot;;</td></tr>
<tr><td class="h">214</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td><div>161</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@col_names = (&#39;_dummy&#39;);</td></tr>
<tr><td class="h">215</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">216</td><td><div class="c3">14</div><div class="c3">40</div></td><td></td><td></td><td></td><td><div>17</div><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %col_nums = map { $col_names[$_] =&gt; $_ } 0..$#col_names;</td></tr>
<tr><td class="h">217</td><td colspan="6"></td></tr><tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Second pass &acirc;&#128;&#148; save row values</td></tr>
<tr><td class="h">219</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $record (@records) {</td></tr>
<tr><td class="h">220</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %row;</td></tr>
<tr><td class="h">221</td><td colspan="6"></td></tr><tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Include id if present</td></tr>
<tr><td class="h">223</td><td><div class="c3">30</div></td><td><div class="c0" title="T/-"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L223">50</a></div></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (defined(my $id = $record-&gt;att(&#39;id&#39;))) {</td></tr>
<tr><td class="h">224</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$row{id} = $id;</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">226</td><td colspan="6"></td></tr><tr><td class="h">227</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for my $leaf ($record-&gt;children) {</td></tr>
<tr><td class="h">228</td><td><div class="c3">58</div></td><td></td><td></td><td></td><td><div>482</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $key = $leaf-&gt;name;</td></tr>
<tr><td class="h">229</td><td><div class="c3">58</div></td><td><div class="c3" title="T/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L229">100</a></div></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (defined $row{$key}) {</td></tr>
<tr><td class="h">230</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$row{$key} .= &#39;,&#39; . $leaf-&gt;field();</td></tr>
<tr><td class="h">231</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">232</td><td><div class="c3">55</div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$row{$key} = $leaf-&gt;field();</td></tr>
<tr><td class="h">233</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">234</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">235</td><td colspan="6"></td></tr><tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Now produce array in canonical column order</td></tr>
<tr><td class="h">237</td><td><div class="c3">30</div><div class="c3">90</div></td><td></td><td></td><td></td><td><div>226</div><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @rows, [ map { $row{$_} } @col_names ];</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">239</td><td colspan="6"></td></tr><tr><td class="h">240</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{rows} = \@rows;</td></tr>
<tr><td class="h">241</td><td colspan="6"></td></tr><tr><td class="h">242</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Store table metadata</td></tr>
<tr><td class="h">243</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{col_names} = \@col_names;</td></tr>
<tr><td class="h">244</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{col_nums}&nbsp;&nbsp;= \%col_nums;</td></tr>
<tr><td class="h">245</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{row_count} = scalar @rows;</td></tr>
<tr><td class="h">246</td><td colspan="6"></td></tr><tr><td class="h">247</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return DBD::XMLSimple::Table-&gt;new($data, $data);</td></tr>
<tr><td class="h">248</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">249</td><td colspan="6"></td></tr><tr><td class="h">250</td><td></td><td></td><td></td><td></td><td></td><td class="s"># Table handle</td></tr>
<tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td class="s">package DBD::XMLSimple::Table;</td></tr>
<tr><td class="h">252</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L252">5</a></div></td><td><div>18</div><div>3</div><div>771</div></td><td class="s">use base qw(DBI::DBD::SqlEngine::Table);</td></tr>
<tr><td class="h">253</td><td colspan="6"></td></tr><tr><td class="h">254</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L254">5</a></div></td><td><div>12</div><div>3</div><div>45</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">255</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L255">5</a></div></td><td><div>6</div><div>5</div><div>950</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">256</td><td colspan="6"></td></tr><tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">259</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L259">14</a></div></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($class, $data, $attr, $flags) = @_;</td></tr>
<tr><td class="h">260</td><td colspan="6"></td></tr><tr><td class="h">261</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$attr-&gt;{table} = $data;</td></tr>
<tr><td class="h">262</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$attr-&gt;{readonly} = 1;</td></tr>
<tr><td class="h">263</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$attr-&gt;{cursor} = 0;</td></tr>
<tr><td class="h">264</td><td colspan="6"></td></tr><tr><td class="h">265</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$attr-&gt;{rows} = $data-&gt;{rows};</td></tr>
<tr><td class="h">266</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$attr-&gt;{col_nums} = $data-&gt;{col_nums};</td></tr>
<tr><td class="h">267</td><td colspan="6"></td></tr><tr><td class="h">268</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $rc = $class-&gt;SUPER::new($data, $attr, $flags);</td></tr>
<tr><td class="h">269</td><td colspan="6"></td></tr><tr><td class="h">270</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>336</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$rc-&gt;{col_names} = $attr-&gt;{col_names};</td></tr>
<tr><td class="h">271</td><td colspan="6"></td></tr><tr><td class="h">272</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $rc;</td></tr>
<tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">274</td><td colspan="6"></td></tr><tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub fetch_row($$)</td></tr>
<tr><td class="h">276</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">277</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L277">44</a></div></td><td><div>5272</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($self, $data) = @_;</td></tr>
<tr><td class="h">278</td><td colspan="6"></td></tr><tr><td class="h">279</td><td><div class="c3">44</div></td><td><div class="c3" title="T/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L279">100</a></div></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($self-&gt;{&#39;cursor&#39;} &gt;= $data-&gt;{&#39;row_count&#39;}) {</td></tr>
<tr><td class="h">280</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">281</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">282</td><td colspan="6"></td></tr><tr><td class="h">283</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{row} = $self-&gt;{rows}[ $self-&gt;{cursor}++ ];</td></tr>
<tr><td class="h">284</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{row};</td></tr>
<tr><td class="h">285</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">286</td><td colspan="6"></td></tr><tr><td class="h">287</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub seek($$$$)</td></tr>
<tr><td class="h">288</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">289</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L289">0</a></div></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($self, $data, $pos, $whence) = @_;</td></tr>
<tr><td class="h">290</td><td colspan="6"></td></tr><tr><td class="h">291</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;seek $pos $whence, not yet implemented\n&quot;;</td></tr>
<tr><td class="h">292</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">293</td><td colspan="6"></td></tr><tr><td class="h">294</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub complete_table_name($$$$)</td></tr>
<tr><td class="h">295</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">296</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L296">14</a></div></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($self, $meta, $file, $respect_case, $file_is_table) = @_;</td></tr>
<tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">298</td><td colspan="6"></td></tr><tr><td class="h">299</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub open_data</td></tr>
<tr><td class="h">300</td><td></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L300">14</a></div></td><td></td><td class="s">{</td></tr>
<tr><td class="h">301</td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# my($className, $meta, $attrs, $flags) = @_;</td></tr>
<tr><td class="h">302</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">303</td><td colspan="6"></td></tr><tr><td class="h">304</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub bootstrap_table_meta</td></tr>
<tr><td class="h">305</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">306</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L306">14</a></div></td><td><div>164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($class, $dbh, $meta, $table, @other) = @_;</td></tr>
<tr><td class="h">307</td><td colspan="6"></td></tr><tr><td class="h">308</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class-&gt;SUPER::bootstrap_table_meta($dbh, $meta, $table, @other);</td></tr>
<tr><td class="h">309</td><td colspan="6"></td></tr><tr><td class="h">310</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$meta-&gt;{table} = $table;</td></tr>
<tr><td class="h">311</td><td colspan="6"></td></tr><tr><td class="h">312</td><td><div class="c3">14</div></td><td></td><td><div class="c0"><a href="blib-lib-DBD-XMLSimple-pm--condition.html#L312">50</a></div></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$meta-&gt;{sql_data_source} ||= __PACKAGE__;</td></tr>
<tr><td class="h">313</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">314</td><td colspan="6"></td></tr><tr><td class="h">315</td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_table_meta($$$$;$)</td></tr>
<tr><td class="h">316</td><td></td><td></td><td></td><td></td><td></td><td class="s">{</td></tr>
<tr><td class="h">317</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-DBD-XMLSimple-pm--subroutine.html#L317">14</a></div></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my($class, $dbh, $table, $file_is_table, $respect_case) = @_;</td></tr>
<tr><td class="h">318</td><td colspan="6"></td></tr><tr><td class="h">319</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $meta = $class-&gt;SUPER::get_table_meta($dbh, $table, $respect_case, $file_is_table);</td></tr>
<tr><td class="h">320</td><td colspan="6"></td></tr><tr><td class="h">321</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $meta-&gt;{table};</td></tr>
<tr><td class="h">322</td><td colspan="6"></td></tr><tr><td class="h">323</td><td><div class="c3">14</div></td><td><div class="c0" title="-/F"><a href="blib-lib-DBD-XMLSimple-pm--branch.html#L323">50</a></div></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return unless $table;</td></tr>
<tr><td class="h">324</td><td colspan="6"></td></tr><tr><td class="h">325</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return($table, $meta);</td></tr>
<tr><td class="h">326</td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">327</td><td colspan="6"></td></tr><tr><td class="h">328 - 380</td><td colspan="5"></td><td class="s"><pre>=head1 AUTHOR

Nigel Horne, C&lt;&lt; &lt;njh at nigelhorne.com&gt; &gt;&gt;

=head1 BUGS

=head1 SEE ALSO

=over 4

=item * Test coverage report: L&lt;https://nigelhorne.github.io/DBD-XMLSimple/coverage/&gt;

=item * L&lt;DBD::AnyData&gt;, which was also used as a template for this module.

=back

=head1 REPOSITORY

L&lt;https://github.com/nigelhorne/DBD-XMLSimple&gt;

=head1 SUPPORT

This module is provided as-is without any warranty.

You can find documentation for this module with the perldoc command.

&nbsp;&nbsp;&nbsp;&nbsp;perldoc DBD::XMLSimple

You can also look for information at:

=over 4

=item * RT: CPAN&#39;s request tracker

L&lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=DBD-XMLSimple&gt;

=item * AnnoCPAN: Annotated CPAN documentation

L&lt;http://annocpan.org/dist/DBD-XMLSimple&gt;

=item * Search CPAN

L&lt;http://search.cpan.org/dist/DBD-XMLSimple/&gt;

=back

=head1 LICENCE AND COPYRIGHT

Copyright 2016-2025 Nigel Horne.

This program is released under the following licence: GPL

=cut</pre></td></tr>
<tr><td class="h">381</td><td colspan="6"></td></tr><tr><td class="h">382</td><td></td><td></td><td></td><td></td><td></td><td class="s">1; # End of DBD::XMLSimple</td></tr>
</table>
</body>
</html>
